<!DOCTYPE html> 
<html lang="es"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

    {% load static %}

    <title>VENTWEB</title> 
    <link rel="stylesheet" href="{% static 'css/index.css' %}"> 
    <script src="{% static 'js/script.js' %}"></script>
</head>
<body>
    <header>
        <nav>
            <h1>VENTWEB</h1>
            <div id="user-info">
                <button id="login-btn" onclick="openLoginModal()">Iniciar Sesión</button>
                <button id="logout-btn" style="display: none;" onclick="logout()">Cerrar Sesión</button>
                <button onclick="window.location.href='chat.html'">Chats</button>
            </div>
        </nav>
    </header>
    
    <div id="user-info">
        <span>Bienvenido, {{ user.username }}</span>
        <a href="{% url 'logout' %}" class="btn">Cerrar Sesión</a>
    </div>


    <div id="filter"> <!-- Contenedor para el filtro y búsqueda de productos -->
        <input type="text" id="search-input" placeholder="Buscar productos..."> 
        <button onclick="togglePublishForm()">Publicar Producto</button> <!-- Botón para mostrar el formulario de publicación de productos -->
        <select id="category-filter">
            <option value="">Todas las categorías</option>
            <option value="electronica">Electrónica</option>
            <option value="ropa">Ropa</option>
            <option value="hogar">Hogar</option>
            <option value="deportes">Deportes</option>
        </select>
        
    </div>

    <div id="publish-form" style="display:none;"> <!-- Formulario para publicar un producto-->
        <h2>Publicar Producto</h2> 
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">Subir</but    ton>
          </form> 
    </div>
    
    <div class="row">
        {% for imagen in imagenes %}
        <div class="col-md-4">
            <div class="card mb-4">
                    <img src="{{ imagen.imagen.url }}" class="card-img-top" alt="{{ imagen.titulo }}">
                <div class="card-body">
                    <h5 class="card-tittle">{{ imagen.titulo }}</h5>
                    <p class="card-text">{{ imagen.descripcion }}</p>
                    <p class="text-muted">Subido por {{ imagen.usuario.nombre }}</p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div> <!-- Contenedor para mostrar los productos publicados -->

    <div id="login-modal" class="modal"> <!-- Modal para iniciar sesión -->
        <div class="modal-content"> 
            <span class="close" onclick="closeLoginModal()">&times;</span> 
            <h2>Iniciar Sesión</h2> 
            <input type="text" id="login-username" placeholder="Nombre de usuario" required> 
            <input type="password" id="login-password" placeholder="Contraseña" required> 
            <button onclick="login()">Iniciar Sesión</button>
        </div>
    </div>

    
</body>
</html>
